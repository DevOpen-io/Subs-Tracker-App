import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:subs_tracker/providers/settings_slice_provider.dart';
import 'package:subs_tracker/screens/home_screen.dart';
import 'package:subs_tracker/utils/app_theme.dart';
import 'package:subs_tracker/utils/notification_service.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await LocalNotificationService.instance.init();
  print('\u0000\u5800\u0000\u0000\u0000\u2000\u0000\u0e00\u0000\u2e00\u0000\u0800\u0000\u3800\u0000\u0200\u0000\u4800\u0000\u0100\u6641\u6972\u6163\u412f\u6962\u6a64\u6e61\u4d4c\u0054\u4d47\u0054\u0000\uffff\u38fc\u0000\u0000\u0000\u0000\u0100\u0000\u9fc2\ua06e\u0086\u0000\u0001\u0000\u0000\u0000\u0000\u5800\u0000\u0000\u0000\u2000\u0000\u0c00\u0000\u2c00\u0000\u0800\u0000\u3400\u0000\u0200\u0000\u4800\u0000\u0100\u6641\u6972\u6163\u412f\u6363\u6172\u4d4c\u0054\u4d47\u0054\uffff\u38fc\u0000\u0000\u0000\u0000\u0100\u0000\u0000\u0000\u9fc2\ua06e\u0086\u0000\u0001\u0000\u0000\u0000\u0000\ua000\u0000\u0000\u0000\u2000\u0000\u1200\u0000\u3200\u0000\u1400\u0000\u4800\u0000\u0500\u0000\u7000\u0000\u0500\u6641\u6972\u6163\u412f\u6464\u7369\u415f\u6162\u6162\u4d4c\u0054\u302b\u3332\u0030\u4145\u0054\u302b\u3432\u0035\u0000\u0000\u8422\u0000\u0000\u0000\u2823\u0100\u0000\u0000\u302a\u0200\u0000\u0000\uac26\u0300\u0000\u0000\u302a\u0200\u0000\u9fc2\ua06e\u0086\u0000\ud3c1\u4984\u006a\u0000\ud2c1\u07ce\u00cc\u0000\ucfc1\u2909\u0054\u0000\uc9c1\uc2c9\u0096\u0000\u0201\u0301\u0002\u0000\u0000\uc001\u0000\u0000\u0000\u2000\u0000\u0e00\u0000\u2e00\u0000\u1a00\u0000\u4800\u0000\u0800\u0000\u8800\u0000\u2200\u6641\u6972\u6163\u412f\u676c\u6569\u7372\u4d4c\u0054\u4d50\u0054\u4557\u5453\u5700\u5445\u4300\u5345\u0054\u4543\u0054\u0000\udc02\u0000\u0000\u0000\u3102\u0100\u0000\u0000\u100e\u0201\u0000\u0000\u0000\u0300\u0000\u0000\u0000\u0300\u0000\u0000\u201c\u0401\u0000\u0000\u100e\u0500\u0000\u0000\u100e\u0201\u0000\u9fc2\ua06e\u0086\u0000\udbc1\ueba7\u40ec\u0000\ud9c1\u212e\u00c4\u0000\ud9c1\u340a\u00e4\u0000\ud8c1\udbd0\u00a4\u0000\ud8c1\ued8f\u00c4\u0000\ud8c1\u805d\u0064\u0000\ud8c1\uf517\u0044\u0000\ud7c1\ud6e7\u0084\u0000\ud7c1\ufc9f\u00c4\u0000\ud7c1\u7b74\u0044\u0000\ud7c1\u6c21\u00c4\u0000\ud6c1\u9ff2\u0084\u0000');
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends ConsumerStatefulWidget {
  const MyApp({super.key});

  @override
  ConsumerState createState() => _MyAppState();
}

class _MyAppState extends ConsumerState<MyApp> {

  @override
  Widget build(BuildContext context) {
    final themeData = ref.watch(settingsSliceProvider).theme;
    return MaterialApp(
      title: 'Subs Tracker',
      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: themeData,
      home: HomeScreen(),
    );
  }
}
